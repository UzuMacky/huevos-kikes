{% extends 'base.html' %}

{% block title %}Login - Huevos Kikes{% endblock %}

{% block extra_css %}
<style>
    .captcha-container {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    
    .captcha-container img {
        border: 2px solid #dee2e6;
        border-radius: 5px;
        max-width: 100%;
        height: auto;
        background-color: #ffffff;
        padding: 5px;
    }
    
    .captcha-container input[type="text"] {
        font-size: 1.1rem;
        letter-spacing: 2px;
        text-transform: uppercase;
    }
    
    .captcha-container .form-control {
        border-color: #0d6efd;
    }
    
    .captcha-container .form-control:focus {
        border-color: #0a58ca;
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
    }
</style>
{% endblock %}

{% block login_content %}
<div class="row justify-content-center mt-5">
    <div class="col-md-5">
        <div class="card shadow">
            <div class="card-header text-center">
                <h3> Huevos Kikes SCM</h3>
                <p class="mb-0">Sistema de Gesti贸n de Cadena de Suministro</p>
            </div>
            <div class="card-body p-4">
                <h4 class="text-center mb-4">Iniciar Sesi贸n</h4>
                
                {% if form.errors %}
                <div class="alert alert-danger">
                    <strong>Error:</strong> Usuario o contrase帽a incorrectos.
                </div>
                {% endif %}
                
                <form method="post">
                    {% csrf_token %}
                    
                    <div class="mb-3">
                        <label for="{{ form.username.id_for_label }}" class="form-label">
                            <i class="bi bi-person"></i> Usuario
                        </label>
                        <input type="text" 
                               name="{{ form.username.name }}" 
                               class="form-control form-control-lg" 
                               id="{{ form.username.id_for_label }}"
                               placeholder="Ingrese su usuario"
                               required
                               autofocus>
                    </div>
                    
                    <div class="mb-3">
                        <label for="{{ form.password.id_for_label }}" class="form-label">
                            <i class="bi bi-lock"></i> Contrase帽a
                        </label>
                        <input type="password" 
                               name="{{ form.password.name }}" 
                               class="form-control form-control-lg" 
                               id="{{ form.password.id_for_label }}"
                               placeholder="Ingrese su contrase帽a"
                               required>
                    </div>
                    
                    <!-- Campo Captcha -->
                    <div class="mb-3">
                        <label for="{{ form.captcha.id_for_label }}" class="form-label">
                            <i class="bi bi-shield-check"></i> Verificaci贸n de Seguridad
                        </label>
                        <div class="captcha-container">
                            {{ form.captcha }}
                        </div>
                        {% if form.captcha.errors %}
                        <div class="text-danger mt-2">
                            <small>{{ form.captcha.errors.0 }}</small>
                        </div>
                        {% endif %}
                        <small class="text-muted d-block mt-2">
                            Ingrese los caracteres que ve en la imagen. 
                            <a href="#" onclick="location.reload(); return false;" class="text-decoration-none">
                                <i class="bi bi-arrow-clockwise"></i> Recargar
                            </a>
                        </small>
                    </div>
                    
                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="bi bi-box-arrow-in-right"></i> Iniciar Sesi贸n
                        </button>
                    </div>
                    
                    <div class="text-center mt-3">
                        <a href="{% url 'core:password_reset' %}" class="text-decoration-none">
                            驴Olvidaste tu contrase帽a?
                        </a>
                    </div>
                </form>
            </div>
            <div class="card-footer text-center text-muted">
                <small>UNIMINUTO - Sistemas de Informaci贸n</small>
            </div>
        </div>
    </div>
</div>
{% endblock %}
